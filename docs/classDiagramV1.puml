@startuml
'https://plantuml.com/class-diagram


class Main {
}

package utilities {
    class SendGrid
    {
    - String salespersonEmail
    - String customerEmail
    - String adminEmail
    - String subjectLine
    - Offer offer
    - String body
    }
    class Calculator
    {
    + void calcCarport()
    + void calcPosts()
    + void calcBeams()
    + void calcRafters()
    }
}

package controllers {
    class OrderController {
    + addRoutes()
    - Order getOrder()
    - Order getOrderByUserID()
    - List<Order> getAllOrders()
    - void deleteOrderByUserID()
    - void updateOrderByID()
    - void requestPaymentByID()
    - void confirmPaymentByID()
    - void addOrderByID()
    }

    class UserController {
    + addRoutes()
    - User getUser()
    - User getUserByID()
    - List<User> getAllUsers()
    - User login()

    }
    class ProductController {
    + addRoutes()
    - Product getProduct()
    - Product getProductByID()
    - void updateProduct()
    - void addProductTo()
    - void deleteProduct()
    - List<Product> getAllProducts()

    }
}

package entities {
    class User{
    -Integer userID
    -String role
    -String username
    -String password
    -Integer telephone
    -String address

    + getUserID()
    + getRole()
    + getUsername()
    + getPassword()
    + getTelephone()
    + getAddress()
    }

    class Order {
    -Integer orderID
    -String name
    -String status
    -TimeStamp orderPlaced
    -TimeStamp orderPaid
    -TimeStamp orderComplete
    }

    class OrderLine {
    -Integer orderLineID
    -Integer carportWidth
    -Integer carportLength
    -String roofType
    -Integer roofInclination
    -Integer shedWidth
    -Integer shedLength
    -BigDecimal price
    -Integer Quantity
    }

    class Offer
    {
    - int salesPrice
    - User recipient
    - User sender
    - int tax
    }

    class Product {
    -Integer productID
    }

    class ProductVariant {
    -Integer productVariantID
    }

package carport {
    abstract class Shed
    {
    }

    abstract class Roof
    {
    }
    class Flat
    {
    }
    class Pitched
    }

package materialList {
abstract class MaterialList
class BillOfMaterial
class PickList
class Invoice
}
}

package exceptions {
    class DatabaseException
    {
    }
}

package persistence {
    class ConnectionPool {
    +ConnectionPool instance
    +HikariDataSource ds
    'Ved ikke om de skal v√¶re static eller ej^
    +getInstance()
    +getConnection()
    +close()
    -createHikariConnectionPool
    }

    class OrderMapper {
    + Order getOrder()
    + List<oOrder> getOrderByUserID()
    + List<Order> getAllOrders()
    + void deleteOrderByUserID()
    + void updateOrderByUserID()
    + void addOrderToDB()
    }

    class ProductMapper {
    + product getProduct()
    + product getProductByID()
    + void updateProduct()
    + void addProductTo()
    + void deleteProduct()
    + List<Product> getAllProducts()
    }

    class UserMapper {
    + void addUser()
    + void deleteUser()
    + void updateUser()
    + List<User> getAllUsers()
    + void login()
    }
}

package config {
class ThymeLeafConfig {
+ templateEngine()
}
}

Main -- OrderController
Main -- ProductController
Main -- UserController

OrderController -- OrderMapper
ProductController -- ProductMapper
UserController -- UserMapper

Order *-- OrderLine
Order o-- User
OrderLine *-- Product

Product o-- ProductVariant

SendGrid o-- Offer

MaterialList <|-- BillOfMaterial
MaterialList <|-- PickList
MaterialList <|-- Invoice

Roof <|-- Flat
Roof <|-- Pitched

@enduml
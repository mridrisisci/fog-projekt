@startuml
'https://plantuml.com/class-diagram


class Main {
+main(String[] args)
}

package utilities {
    class SendGrid
    {
    - String salespersonEmail
    - String customerEmail
    - String adminEmail
    - String subjectLine
    - Offer offer
    - String body
    }
    class Calculator
    {
    + void calcCarport()
    + void calcPosts()
    + void calcBeams()
    + void calcRafters()
    }
}

package controllers {
    class OrderController {
    + addRoutes()
    - Order getOrder()
    - Order getOrderByUserID()
    - List<Order> getAllOrders()
    - void deleteOrderByUserID()
    - void updateOrderByID()
    - void requestPaymentByID()
    - void confirmPaymentByID()
    - void addOrderByID()
    }

    class UserController {
    + addRoutes()
    - User getUser()
    - User getUserByID()
    - List<User> getAllUsers()
    - User login()

    }
    class ProductController {
    + addRoutes()
    - Product getProduct()
    - Product getProductByID()
    - void updateProduct()
    - void addProductTo()
    - void deleteProduct()
    - List<Product> getAllProducts()

    }
}

package entities {
    class User{
    -Integer userID
    -String role
    -String username
    -String password
    -Integer telephone
    -String address

    + int getUserID()
    + String getRole()
    + String getUsername()
    + String getPassword()
    + int getTelephoneNum()
    + String getAddress()
    }

    class Order {
    -Integer orderID
    -String name
    -String status
    -TimeStamp orderPlaced
    -TimeStamp orderPaid
    -TimeStamp orderComplete
    }

    class OrderLine {
    -int orderLineID
    -int carportWidth
    -int carportLength
    - Roof roof
    -Shed shed
    -BigDecimal price
    -Integer Quantity
    }

    class Offer
    {
    - int salesPrice
    - User recipient
    - User sender
    - int tax
    }

    class Product {
    -Integer productID
    }

    class ProductVariant {
    -Integer productVariantID
    }

package carport {
    class Shed
    {
    int width
    int length
    }

    abstract class Roof
    {
    -String roofType
    }
    class Flat
    {
    - String roofType
    + String getRoofType()
    }
    class Pitched{
    - int roofInclination
    - String roofType
    + int getroofInclination()
    + String getRoofType()
    }
    }

package productList {
abstract class ProductList
{
- List<Product> productList
+ List<Product> getProductList()
}
class BillOfMaterial
{
- List<Product> productList
+ List<Product> getProductList()
}
class PickList
{
- List<Product> productList
+ List<Product> getProductList()
+ void addToProductList()
+ void removeFromProductList()

}
class Invoice
{
- List<Product> productList
- String message
+ List<Product> getProductList()
+ String generateInvoiceText(int userID, Order order, OrderLine orderLine)
}
}
}

package exceptions {
    class DatabaseException
    {
    + DatabaseException(String userMessage)
    + DatabaseException((String userMessage, String systemMessage)
    }
}

package persistence {
    class ConnectionPool {
    +ConnectionPool instance
    +HikariDataSource ds
    'Ved ikke om de skal v√¶re static eller ej^
    +getInstance()
    +getConnection()
    +close()
    -createHikariConnectionPool
    }

    class OrderMapper {
    + Order getOrder()
    + List<Order> getOrderByUserID(int userID)
    + List<Order> getAllOrders()
    + void deleteOrderByID(int userID, int orderID)
    + void updateOrderByUserID(OrderLine orderLine)
    + void addOrderToDB(Order order, OrderLine orderLine)
    }

    class ProductMapper {
    + product getProduct()
    + product getProductByID(int productID)
    + void updateProduct(Product product)
    + void addProductToDB(Product product)
    + void deleteProductByID(int productID)
    + List<Product> getAllProducts()
    }

    class UserMapper {
    + void addUser()
    + void deleteUser()
    + void updateUser()
    + List<User> getAllUsers()
    + void login()
    }
}

package config {
class ThymeLeafConfig {
+ templateEngine()
}
}

Main -- OrderController
Main -- ProductController
Main -- UserController

OrderController -- OrderMapper
ProductController -- ProductMapper
UserController -- UserMapper

Order *-- OrderLine
Order o-- User
OrderLine *-- Product

Product o-- ProductVariant

SendGrid o-- Offer

ProductList <|-- BillOfMaterial
ProductList <|-- PickList
ProductList <|-- Invoice

Roof <|-- Flat
Roof <|-- Pitched

@enduml